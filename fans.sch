EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 7 15
Title "Fan Control"
Date ""
Rev ""
Comp "Oxide Computer"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	3800 2850 3350 2850
$Comp
L power:GND #PWR0707
U 1 1 5F24D1E3
P 5150 4450
F 0 "#PWR0707" H 5150 4200 50  0001 C CNN
F 1 "GND" H 5155 4277 50  0000 C CNN
F 2 "" H 5150 4450 50  0001 C CNN
F 3 "" H 5150 4450 50  0001 C CNN
	1    5150 4450
	1    0    0    -1  
$EndComp
$Comp
L Connector:Conn_01x04_Male J701
U 1 1 5F249922
P 7750 2200
F 0 "J701" H 7722 2082 50  0000 R CNN
F 1 "FAN6" H 7722 2173 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 2200 50  0001 C CNN
F 3 "~" H 7750 2200 50  0001 C CNN
	1    7750 2200
	-1   0    0    1   
$EndComp
$Comp
L Connector:Conn_01x04_Male J702
U 1 1 5F24A871
P 7750 2700
F 0 "J702" H 7722 2582 50  0000 R CNN
F 1 "FAN5" H 7722 2673 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 2700 50  0001 C CNN
F 3 "~" H 7750 2700 50  0001 C CNN
	1    7750 2700
	-1   0    0    1   
$EndComp
$Comp
L Connector:Conn_01x04_Male J703
U 1 1 5F24AE75
P 7750 3200
F 0 "J703" H 7722 3082 50  0000 R CNN
F 1 "FAN4" H 7722 3173 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 3200 50  0001 C CNN
F 3 "~" H 7750 3200 50  0001 C CNN
	1    7750 3200
	-1   0    0    1   
$EndComp
$Comp
L Connector:Conn_01x04_Male J704
U 1 1 5F24E3DE
P 7750 3700
F 0 "J704" H 7722 3582 50  0000 R CNN
F 1 "FAN3" H 7722 3673 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 3700 50  0001 C CNN
F 3 "~" H 7750 3700 50  0001 C CNN
	1    7750 3700
	-1   0    0    1   
$EndComp
$Comp
L Connector:Conn_01x04_Male J705
U 1 1 5F24E3E4
P 7750 4200
F 0 "J705" H 7722 4082 50  0000 R CNN
F 1 "FAN2" H 7722 4173 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 4200 50  0001 C CNN
F 3 "~" H 7750 4200 50  0001 C CNN
	1    7750 4200
	-1   0    0    1   
$EndComp
$Comp
L Connector:Conn_01x04_Male J706
U 1 1 5F24E3EA
P 7750 4700
F 0 "J706" H 7722 4582 50  0000 R CNN
F 1 "FAN1" H 7722 4673 50  0000 R CNN
F 2 "Connector:FanPinHeader_1x04_P2.54mm_Vertical" H 7750 4700 50  0001 C CNN
F 3 "~" H 7750 4700 50  0001 C CNN
	1    7750 4700
	-1   0    0    1   
$EndComp
Wire Wire Line
	7550 2300 7500 2300
Wire Wire Line
	7500 2300 7500 2800
Wire Wire Line
	7500 4800 7550 4800
Wire Wire Line
	7550 2200 7400 2200
Wire Wire Line
	7400 2200 7400 2700
Wire Wire Line
	7400 4700 7550 4700
Wire Wire Line
	7400 2200 7400 1900
Connection ~ 7400 2200
$Comp
L power:+12V #PWR0709
U 1 1 5F24F02A
P 7400 1900
F 0 "#PWR0709" H 7400 1750 50  0001 C CNN
F 1 "+12V" H 7415 2073 50  0000 C CNN
F 2 "" H 7400 1900 50  0001 C CNN
F 3 "" H 7400 1900 50  0001 C CNN
	1    7400 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 2950 5650 2950
Wire Wire Line
	5650 2950 5650 2000
Wire Wire Line
	5750 2600 5750 3050
Wire Wire Line
	5750 3050 5300 3050
Wire Wire Line
	5300 3150 5850 3150
Wire Wire Line
	5850 3150 5850 2500
Wire Wire Line
	5850 2500 5950 2500
Wire Wire Line
	5950 3100 5950 3250
Wire Wire Line
	5950 3250 5300 3250
Wire Wire Line
	5300 3350 6050 3350
Wire Wire Line
	6050 3350 6050 3000
Wire Wire Line
	5950 3600 5950 3450
Wire Wire Line
	5950 3450 5300 3450
Wire Wire Line
	7550 3550 7550 3500
Wire Wire Line
	5300 3650 5750 3650
Wire Wire Line
	5750 3650 5750 4100
Wire Wire Line
	5300 3750 5850 3750
Wire Wire Line
	5850 3750 5850 4000
Wire Wire Line
	5300 3850 5650 3850
Wire Wire Line
	5650 3850 5650 4600
Wire Wire Line
	5300 3950 5550 3950
Wire Wire Line
	5550 3950 5550 4500
Wire Wire Line
	7550 2700 7400 2700
Connection ~ 7400 2700
Wire Wire Line
	7550 3700 7400 3700
Connection ~ 7400 3700
Wire Wire Line
	7400 3700 7400 4200
Wire Wire Line
	7550 4200 7400 4200
Connection ~ 7400 4200
Wire Wire Line
	7400 4200 7400 4700
Wire Wire Line
	7550 3800 7500 3800
Connection ~ 7500 3800
Wire Wire Line
	7500 3800 7500 4300
Wire Wire Line
	7550 3300 7500 3300
Connection ~ 7500 3300
Wire Wire Line
	7500 3300 7500 3800
Wire Wire Line
	7550 2800 7500 2800
Connection ~ 7500 2800
Wire Wire Line
	7500 2800 7500 3300
Wire Wire Line
	7550 4300 7500 4300
Connection ~ 7500 4300
Wire Wire Line
	7500 4300 7500 4800
Wire Wire Line
	7550 3200 7400 3200
Wire Wire Line
	7400 2700 7400 3200
Connection ~ 7400 3200
Wire Wire Line
	7400 3200 7400 3700
Text Notes 2650 3450 0    50   ~ 0
Start PWM @ 25kHz
Text Notes 2150 3850 0    50   ~ 0
Enable I2C watchdog at poweron
NoConn ~ 3800 3550
Text Notes 3000 3550 0    50   ~ 0
Spin-up for 0.5s
Text Notes 2600 4000 0    50   ~ 0
100% PWM at startup
Wire Wire Line
	3800 3650 3800 3700
$Comp
L power:GND #PWR0703
U 1 1 5F263588
P 3800 3700
F 0 "#PWR0703" H 3800 3450 50  0001 C CNN
F 1 "GND" V 3805 3572 50  0000 R CNN
F 2 "" H 3800 3700 50  0001 C CNN
F 3 "" H 3800 3700 50  0001 C CNN
	1    3800 3700
	0    1    1    0   
$EndComp
Connection ~ 3800 3700
Wire Wire Line
	3800 3700 3800 3750
Text Notes 2750 3700 0    50   ~ 0
i2c addr 0100 000
NoConn ~ 3800 4250
NoConn ~ 3800 3150
$Comp
L power:GND #PWR0701
U 1 1 5F266933
P 3800 3250
F 0 "#PWR0701" H 3800 3000 50  0001 C CNN
F 1 "GND" V 3805 3122 50  0000 R CNN
F 2 "" H 3800 3250 50  0001 C CNN
F 3 "" H 3800 3250 50  0001 C CNN
	1    3800 3250
	0    1    1    0   
$EndComp
Text HLabel 1200 2850 0    50   BiDi ~ 0
SDA
Text HLabel 1200 2750 0    50   BiDi ~ 0
SCL
Text HLabel 3350 2850 0    50   Output ~ 0
~ALERT
NoConn ~ 3800 2950
$Comp
L Device:R_Pack04 RN702
U 1 1 5F381500
P 6700 1400
F 0 "RN702" V 6400 1150 50  0000 L CNN
F 1 "3k3" V 6400 1450 50  0000 L CNN
F 2 "Resistor_SMD:R_Array_Convex_4x1206" V 7375 1400 50  0001 C CNN
F 3 "http://www.vishay.com/docs/31509/csc.pdf" H 6700 1400 50  0001 C CNN
	1    6700 1400
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Pack04 RN703
U 1 1 5F382413
P 7200 1400
F 0 "RN703" V 6900 1150 50  0000 L CNN
F 1 "3k3" V 6900 1450 50  0000 L CNN
F 2 "Resistor_SMD:R_Array_Convex_4x1206" V 7875 1400 50  0001 C CNN
F 3 "http://www.vishay.com/docs/31509/csc.pdf" H 7200 1400 50  0001 C CNN
	1    7200 1400
	1    0    0    -1  
$EndComp
Wire Wire Line
	5650 4600 7100 4600
Wire Wire Line
	5950 3600 6600 3600
Connection ~ 6050 1200
Wire Wire Line
	6050 1200 6150 1200
Connection ~ 6150 1200
Wire Wire Line
	6150 1200 6250 1200
Wire Wire Line
	6500 1200 6600 1200
Connection ~ 6600 1200
Wire Wire Line
	6600 1200 6700 1200
Connection ~ 6700 1200
Wire Wire Line
	6700 1200 6800 1200
Connection ~ 6800 1200
Wire Wire Line
	6800 1200 7000 1200
Connection ~ 7000 1200
Wire Wire Line
	7000 1200 7100 1200
Connection ~ 7100 1200
Wire Wire Line
	7100 1200 7200 1200
Connection ~ 7200 1200
Wire Wire Line
	7200 1200 7300 1200
Connection ~ 6250 1200
Connection ~ 5950 1200
Connection ~ 6500 1200
Wire Wire Line
	5950 1200 5750 1200
Wire Wire Line
	5950 1200 6050 1200
Wire Wire Line
	6250 1200 6500 1200
Wire Wire Line
	5550 2100 5550 2850
Wire Wire Line
	5550 2850 5300 2850
Wire Wire Line
	5150 4450 4650 4450
Wire Wire Line
	4500 4450 4650 4450
Connection ~ 4650 4450
$Comp
L max31790:MAX31790 U?
U 1 1 5F24B77E
P 4550 3350
AR Path="/5F24B77E" Ref="U?"  Part="1" 
AR Path="/5F24B563/5F24B77E" Ref="U701"  Part="1" 
F 0 "U701" H 4500 3450 50  0000 L CNN
F 1 "MAX31790" H 4400 3350 50  0000 L CNN
F 2 "tqfn28:QFN-28_EP_4x4_Pitch0.4mm" H 4550 3350 50  0001 C CNN
F 3 "" H 4550 3350 50  0001 C CNN
	1    4550 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Pack04 RN701
U 1 1 5F26ACB1
P 6150 1400
F 0 "RN701" V 5850 1150 50  0000 L CNN
F 1 "3k3" V 5850 1450 50  0000 L CNN
F 2 "Resistor_SMD:R_Array_Convex_4x1206" V 6825 1400 50  0001 C CNN
F 3 "http://www.vishay.com/docs/31509/csc.pdf" H 6150 1400 50  0001 C CNN
	1    6150 1400
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 3550 6500 3550
Wire Wire Line
	5550 4500 7000 4500
Wire Wire Line
	5650 2000 6150 2000
Wire Wire Line
	6050 1600 6050 2600
Connection ~ 6050 2600
Wire Wire Line
	6050 2600 5750 2600
Wire Wire Line
	5550 2100 6250 2100
Wire Wire Line
	5950 1600 5950 2500
Connection ~ 5950 2500
Wire Wire Line
	6050 2600 7550 2600
Wire Wire Line
	6150 1600 6150 2000
Connection ~ 6150 2000
Wire Wire Line
	6150 2000 7550 2000
Wire Wire Line
	5950 2500 7550 2500
Wire Wire Line
	6250 1600 6250 2100
Connection ~ 6250 2100
Wire Wire Line
	6250 2100 7550 2100
Wire Wire Line
	5950 3100 6800 3100
Wire Wire Line
	6500 1600 6500 3550
Connection ~ 6500 3550
Wire Wire Line
	6050 3000 6700 3000
Wire Wire Line
	6600 1600 6600 3600
Connection ~ 6600 3600
Wire Wire Line
	6600 3600 7550 3600
Wire Wire Line
	6700 1600 6700 3000
Connection ~ 6700 3000
Wire Wire Line
	6700 3000 7550 3000
Wire Wire Line
	6500 3550 7550 3550
Wire Wire Line
	6800 1600 6800 3100
Connection ~ 6800 3100
Wire Wire Line
	6800 3100 7550 3100
Wire Wire Line
	5750 4100 7300 4100
Wire Wire Line
	7000 1600 7000 4500
Connection ~ 7000 4500
Wire Wire Line
	5850 4000 7200 4000
Wire Wire Line
	7100 1600 7100 4600
Connection ~ 7100 4600
Wire Wire Line
	7100 4600 7550 4600
Wire Wire Line
	7200 1600 7200 4000
Connection ~ 7200 4000
Wire Wire Line
	7200 4000 7550 4000
Wire Wire Line
	7000 4500 7550 4500
Wire Wire Line
	7300 1600 7300 4100
Connection ~ 7300 4100
Wire Wire Line
	7300 4100 7550 4100
$Comp
L Regulator_Linear:MCP1703A-5002_SOT89 U702
U 1 1 5F4888C8
P 3150 1400
F 0 "U702" H 3150 1642 50  0000 C CNN
F 1 "MCP1703A-5002_SOT89" H 3150 1551 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-89-3" H 3150 1600 50  0001 C CNN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20005122B.pdf" H 3150 1350 50  0001 C CNN
	1    3150 1400
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C701
U 1 1 5F48A9CC
P 2450 1600
F 0 "C701" H 2542 1646 50  0000 L CNN
F 1 "1µ" H 2542 1555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 2450 1600 50  0001 C CNN
F 3 "~" H 2450 1600 50  0001 C CNN
	1    2450 1600
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C702
U 1 1 5F48ADE0
P 3600 1600
F 0 "C702" H 3692 1646 50  0000 L CNN
F 1 "1µ" H 3692 1555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 3600 1600 50  0001 C CNN
F 3 "~" H 3600 1600 50  0001 C CNN
	1    3600 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	3450 1400 3600 1400
Wire Wire Line
	3600 1400 3600 1500
Wire Wire Line
	3600 1700 3150 1700
Connection ~ 3150 1700
Wire Wire Line
	3150 1700 2450 1700
Wire Wire Line
	2450 1500 2450 1400
Wire Wire Line
	2450 1400 2850 1400
$Comp
L power:+12V #PWR0706
U 1 1 5F495AE2
P 2450 1400
F 0 "#PWR0706" H 2450 1250 50  0001 C CNN
F 1 "+12V" H 2465 1573 50  0000 C CNN
F 2 "" H 2450 1400 50  0001 C CNN
F 3 "" H 2450 1400 50  0001 C CNN
	1    2450 1400
	1    0    0    -1  
$EndComp
Connection ~ 2450 1400
Wire Wire Line
	3600 1400 3950 1400
Connection ~ 3600 1400
Text Label 3950 1400 0    50   ~ 0
FAN5V
Text Label 5750 1200 2    50   ~ 0
FAN5V
Text Label 4550 2450 1    50   ~ 0
FAN5V
$Comp
L power:GND #PWR0708
U 1 1 5F49B33E
P 3150 1700
F 0 "#PWR0708" H 3150 1450 50  0001 C CNN
F 1 "GND" H 3155 1527 50  0000 C CNN
F 2 "" H 3150 1700 50  0001 C CNN
F 3 "" H 3150 1700 50  0001 C CNN
	1    3150 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	3800 3950 3800 4050
Text Label 3800 3450 2    50   ~ 0
FAN5V
Text Label 3800 3850 2    50   ~ 0
FAN5V
Text Label 3800 3950 2    50   ~ 0
FAN5V
$Comp
L Interface:PCA9306DP U703
U 1 1 5F4BCC08
P 1800 2750
F 0 "U703" H 2000 3200 50  0000 C CNN
F 1 "PCA9306DP" H 2050 2300 50  0000 C CNN
F 2 "Package_SO:TSSOP-8_3x3mm_P0.65mm" H 1800 2300 50  0001 C CNN
F 3 "https://www.nxp.com/docs/en/data-sheet/PCA9306.pdf" H 1500 3200 50  0001 C CNN
	1    1800 2750
	1    0    0    -1  
$EndComp
$Comp
L Device:R R701
U 1 1 5F4BDB11
P 2200 2000
F 0 "R701" H 2270 2046 50  0000 L CNN
F 1 "200k" V 2200 1900 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 2130 2000 50  0001 C CNN
F 3 "~" H 2200 2000 50  0001 C CNN
	1    2200 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	1900 2250 1900 2150
Wire Wire Line
	1900 2150 1950 2150
Wire Wire Line
	2200 2150 2200 2650
Connection ~ 2200 2150
Text Label 2200 1850 2    50   ~ 0
FAN5V
Text Notes 1200 1950 0    50   ~ 0
Weird power circuit\nfrom datasheet.
$Comp
L power:+3V3 #PWR0702
U 1 1 5F4CA40A
P 1700 2250
F 0 "#PWR0702" H 1700 2100 50  0001 C CNN
F 1 "+3V3" H 1715 2423 50  0000 C CNN
F 2 "" H 1700 2250 50  0001 C CNN
F 3 "" H 1700 2250 50  0001 C CNN
	1    1700 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	1200 2750 1400 2750
Wire Wire Line
	1200 2850 1400 2850
$Comp
L power:GND #PWR0704
U 1 1 5F4D65E1
P 1800 3250
F 0 "#PWR0704" H 1800 3000 50  0001 C CNN
F 1 "GND" H 1805 3077 50  0000 C CNN
F 2 "" H 1800 3250 50  0001 C CNN
F 3 "" H 1800 3250 50  0001 C CNN
	1    1800 3250
	1    0    0    -1  
$EndComp
Wire Wire Line
	2200 2750 3000 2750
Wire Wire Line
	2600 2650 2600 2850
Wire Wire Line
	2600 2850 2200 2850
Wire Wire Line
	2600 2650 2750 2650
$Comp
L Device:R R702
U 1 1 5F4E01D9
P 2750 2400
F 0 "R702" H 2820 2446 50  0000 L CNN
F 1 "3k3" V 2750 2300 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 2680 2400 50  0001 C CNN
F 3 "~" H 2750 2400 50  0001 C CNN
	1    2750 2400
	1    0    0    -1  
$EndComp
$Comp
L Device:R R703
U 1 1 5F4E073B
P 3000 2400
F 0 "R703" H 3070 2446 50  0000 L CNN
F 1 "3k3" V 3000 2300 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" V 2930 2400 50  0001 C CNN
F 3 "~" H 3000 2400 50  0001 C CNN
	1    3000 2400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 2550 2750 2650
Connection ~ 2750 2650
Wire Wire Line
	2750 2650 3800 2650
Wire Wire Line
	3000 2550 3000 2750
Connection ~ 3000 2750
Wire Wire Line
	3000 2750 3800 2750
Wire Wire Line
	2750 2250 2900 2250
Wire Wire Line
	2900 2250 2900 2200
Connection ~ 2900 2250
Wire Wire Line
	2900 2250 3000 2250
Text Label 2900 2200 0    50   ~ 0
FAN5V
Text Notes 2850 3100 0    50   ~ 0
~ALERT is  O.D.\nand so 3v3 is ok
Text Label 3200 2650 0    50   ~ 0
5VSDA
Text Label 3250 2750 0    50   ~ 0
5VSCL
$Comp
L power:GND #PWR0107
U 1 1 5F507941
P 7500 4800
F 0 "#PWR0107" H 7500 4550 50  0001 C CNN
F 1 "GND" H 7505 4627 50  0000 C CNN
F 2 "" H 7500 4800 50  0001 C CNN
F 3 "" H 7500 4800 50  0001 C CNN
	1    7500 4800
	1    0    0    -1  
$EndComp
Connection ~ 7500 4800
$Comp
L power:PWR_FLAG #FLG0102
U 1 1 5F48CA09
P 1950 2150
F 0 "#FLG0102" H 1950 2225 50  0001 C CNN
F 1 "PWR_FLAG" H 1950 2323 50  0000 C CNN
F 2 "" H 1950 2150 50  0001 C CNN
F 3 "~" H 1950 2150 50  0001 C CNN
	1    1950 2150
	1    0    0    -1  
$EndComp
Connection ~ 1950 2150
Wire Wire Line
	1950 2150 2200 2150
$EndSCHEMATC
